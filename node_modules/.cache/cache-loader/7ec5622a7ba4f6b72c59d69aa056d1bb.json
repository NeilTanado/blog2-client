{"remainingRequest":"/Users/Neil/Documents/phase-2/blog/blog-client/node_modules/thread-loader/dist/cjs.js!/Users/Neil/Documents/phase-2/blog/blog-client/node_modules/babel-loader/lib/index.js!/Users/Neil/Documents/phase-2/blog/blog-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Neil/Documents/phase-2/blog/blog-client/src/components/Content.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/Neil/Documents/phase-2/blog/blog-client/src/components/Content.vue","mtime":1527065559143},{"path":"/Users/Neil/Documents/phase-2/blog/blog-client/node_modules/cache-loader/dist/cjs.js","mtime":1526723056402},{"path":"/Users/Neil/Documents/phase-2/blog/blog-client/node_modules/thread-loader/dist/cjs.js","mtime":1526723057286},{"path":"/Users/Neil/Documents/phase-2/blog/blog-client/node_modules/babel-loader/lib/index.js","mtime":1526583314000},{"path":"/Users/Neil/Documents/phase-2/blog/blog-client/node_modules/vue-loader/lib/index.js","mtime":1526676097000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport Vuex from \"vuex\";\nexport default {\n  name: 'context',\n\n  data() {\n    return {\n      articles: []\n    };\n  },\n\n  methods: {\n    createArt: function () {\n      if (!localStorage.getItem('token')) {\n        alert('please login for create an article');\n      } else {\n        this.$router.push('/article');\n      }\n    },\n    callData: function () {\n      let self = this;\n      axios.get('http://35.185.185.236/articles/dataarticle').then(value => {\n        value.data.data.forEach(articlesData => {\n          self.articles.unshift(articlesData);\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    editData: function (articleId, dataId) {\n      if (localStorage.getItem('userId')) {\n        var userId = localStorage.getItem('userId');\n\n        if (userId === dataId) {} else {\n          alert('kamu tidak bisa mengedit article milik orang lain');\n          this.$router.push('/');\n        }\n      } else {\n        alert('please login first to edit');\n        this.$router.push('/');\n      }\n    },\n    deleteArticle: function (articleId, dataId) {\n      if (localStorage.getItem('userId')) {\n        var userId = localStorage.getItem('userId');\n        console.log(articleId);\n\n        if (userId === dataId) {\n          axios.delete('http://35.185.185.236/articles/deletearticle/' + articleId).then(value => {\n            for (var i = 0; i < this.articles.length; i++) {\n              if (this.articles[i]._id === articleId) {\n                this.articles.splice(i, 1);\n              }\n            }\n          }).catch(err => {\n            console.log(err);\n          });\n        } else {\n          alert('kamu tidak bisa menghapus article milik orang lain');\n          this.$router.push('/');\n        }\n      }\n    }\n  },\n\n  mounted() {\n    this.callData();\n  }\n\n};",{"version":3,"sources":["Content.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAoBA;AACA;AAEA;QAEA;;SACA;;gBAEA,AACA;AAFA;AAGA;;;2BAEA;0CACA;cACA;aACA;0BACA;AACA;AACA;0BACA;iBACA;gBACA,4DACA;gDACA;gCACA;AACA;AACA,sBACA;oBACA;AACA;AACA;2CACA;0CACA;0CACA;;+BAEA,QACA;gBACA;4BACA;AACA;AACA,aACA;cACA;0BACA;AACA;AACA;gDACA;0CACA;0CACA;oBACA;;+BACA;yEACA,yBACA;2DACA;sDACA;wCACA;AACA;AACA;AACA,0BACA;wBACA;AACA;eACA;gBACA;4BACA;AACA;AACA;AACA,AACA;AAzDA;;YA0DA;SACA;AACA;;AAnEA","file":"Content.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"valign-wrapper flex-container give-margin\">\n      <a class=\"waves-effect waves-light btn\" @click=\"createArt()\">Create New Article</a>\n    </div>\n    <div v-for=\"article in articles\">\n      <div class=\"col s12 m6 flex-container\">\n        <div class=\"card blue-grey darken-1\" style=\"width:100%!important\">\n          <div class=\"card-content white-text\">\n            <span class=\"card-title\"><b>{{ article.title }}</b><button class=\"floating\" @click=\"deleteArticle(article._id,article.author._id)\"><i class=\"tiny material-icons\">close</i></button></span>\n            <h8><i> author: {{ article.author.name }} </i><button class=\"floating\" @click=\"editData(article._id,article.author._id)\"><router-link :to=\"{ path: '/articleEdit', query:{id:article._id,title:article.title,text:article.text}}\"><i class=\"tiny material-icons\">border_color</i></router-link></button></h8>\n            <p>{{ article.text }}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport Vuex from \"vuex\";\n\nexport default {\n  name:'context',\n  data(){\n    return{\n      articles:[],\n    }\n  },\n  methods:{\n    createArt:function(){\n      if(!localStorage.getItem('token')){\n        alert('please login for create an article')\n      }else{\n        this.$router.push('/article')\n      }\n    },\n    callData:function(){\n      let self = this\n      axios.get('http://35.185.185.236/articles/dataarticle')\n      .then((value) => {\n        value.data.data.forEach(articlesData=>{\n          self.articles.unshift(articlesData)\n        })\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n    },\n    editData:function(articleId,dataId){\n      if(localStorage.getItem('userId')){\n        var userId = localStorage.getItem('userId')\n        if(userId === dataId){\n\n        }else{\n          alert('kamu tidak bisa mengedit article milik orang lain')\n          this.$router.push('/')\n        }\n      }\n      else{\n        alert('please login first to edit')\n        this.$router.push('/')\n      }\n    },\n    deleteArticle:function(articleId,dataId){\n      if(localStorage.getItem('userId')){\n        var userId = localStorage.getItem('userId')\n        console.log(articleId);\n        if(userId === dataId){\n          axios.delete('http://35.185.185.236/articles/deletearticle/'+articleId)\n          .then((value) => {\n            for(var i = 0 ; i < this.articles.length ; i++){\n              if(this.articles[i]._id === articleId){\n                this.articles.splice(i,1)\n              }\n            }\n          })\n          .catch((err) => {\n            console.log(err);\n          })\n        }else{\n          alert('kamu tidak bisa menghapus article milik orang lain')\n          this.$router.push('/')\n        }\n      }\n    }\n  },\n  mounted(){\n    this.callData()\n  }\n}\n</script>\n\n<style scoped>\n  .flex-container{\n    justify-content : center;\n    display: flex;\n  }\n  .give-margin {\n    margin-top: 1.5em;\n    margin-bottom: 1.5em;\n  }\n\n  .card-content{\n    border:1px solid black;\n  }\n  .floating{\n    float:right;\n  }\n</style>\n"]}]}